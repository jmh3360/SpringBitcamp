<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.web.mapperImpl.BoardMapperImpl">
	<insert id="insertBoard" parameterType="cmd">
	<!--  INSERT INTO Board VALUES(bbsSeq.nextval,#{board.title},#{board.content},sysdate,#{board.nickName})-->
	</insert>
	<update id="updateBoard" parameterType="cmd"></update>
	<delete id="deleteBoard" parameterType="cmd"></delete>
	<!-- 전체 게시판 리스트 중 스타트 로우와 앤드로우를 전달 받아 boardmapper에 전달 한다. -->
	<!-- rownum은 테이블 생성시 디폴트로 생성되지만 표현되지 않기에 새로운 테이블을 만들어 할당해 줘야 한다. -->
	<!-- 그렇지 않을 경우 원하는 범위 값만큼 불러 올 수 없다. -->
	<select id="selectAll" resultType="board" parameterType="cmd">
	select A2.* from(
		select rownum rn, A.* 
		    from(select 
		            bbs_Seq as bbsSeq,
		            title,
		            content,
		            regdate,
		            id 
		                from board 
		                    order by bbsSeq desc
        		) A ) A2
            where rn between #{paging.startRow} and #{paging.endRow}
	</select>
	<select id="selectByName" resultType="board"></select>
	<!-- 게시글 선택시 sequence값을 파라미터 타입을 통해 전달 받아 db내에서 검색 후 나타낸다. -->
	<select id="selectById" resultType="board" parameterType="cmd">
	SELECT * FROM Board WHERE bbsSeq LIKE #{board.bbsSeq}
	</select>
	<!-- 이전에는 list.size를 사용하여 카운트를 받아 왔다 크게 상관은 없지만 db의 내용이 많을 경우 list목록 전체를 받아오기엔
	 부하가 너무 크다 그래서 애초에 db문에서 갯수를 불러온다. -->
	<select id="selectCount" resultType="int" parameterType="cmd">
	SELECT COUNT(*) FROM Board
	</select>
</mapper>